# Nexora AED Platform - Backend Environment Configuration

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=8080
API_VERSION=v1

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string
DATABASE_URL="postgresql://nexora_user:password@localhost:5432/nexora_db"

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis connection URLs
REDIS_URL="redis://localhost:6379"
REDIS_QUEUE_URL="redis://localhost:6379/1"
REDIS_CACHE_URL="redis://localhost:6379/2"

# Redis connection settings
REDIS_PASSWORD=""
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# JWT secrets (CHANGE THESE IN PRODUCTION!)
JWT_SECRET="your-super-secret-jwt-key-change-in-production-min-32-chars"
JWT_REFRESH_SECRET="your-super-secret-refresh-key-change-in-production-min-32-chars"

# JWT token expiration times
JWT_ACCESS_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# =============================================================================
# ENCRYPTION CONFIGURATION
# =============================================================================
# Encryption key for sensitive data (32 characters)
ENCRYPTION_KEY="your-32-character-encryption-key"

# Password hashing rounds
BCRYPT_ROUNDS=12

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Frontend URLs for CORS
FRONTEND_URL="http://localhost:3000"
ALLOWED_ORIGINS="http://localhost:3000"

# =============================================================================
# OSINT THREAT INTELLIGENCE CONFIGURATION
# =============================================================================
# Enable OSINT threat intelligence ingestion
ENABLE_OSINT_INGESTION=false

# AlienVault OTX API Key (https://otx.alienvault.com/)
OTX_API_KEY=""

# Censys API Token (Get free key at: https://search.censys.io/)
CENSYS_API_TOKEN=""

# Risk Engine URL (FastAPI ML Service)
RISK_ENGINE_URL="http://localhost:8000/score"

# OSINT Polling Configuration
OSINT_POLL_INTERVAL_MS=300000  # 5 minutes
MAX_OTX_INDICATORS=50
MAX_CENSYS_ENRICHMENT=50

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Global rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Authentication rate limiting
AUTH_RATE_LIMIT_WINDOW_MS=300000
AUTH_RATE_LIMIT_MAX_ATTEMPTS=5

# Organization rate limiting
ORG_RATE_LIMIT_WINDOW_MS=60000
ORG_RATE_LIMIT_MAX_REQUESTS=1000

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features
ENABLE_WEBSOCKETS=true
ENABLE_METRICS=true
ENABLE_AUDIT_LOGGING=true
ENABLE_MFA=true
ENABLE_API_KEYS=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Loki logging (optional)
LOKI_URL=""
LOKI_USERNAME=""
LOKI_PASSWORD=""

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Email service (for notifications)
SMTP_HOST=""
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=""
SMTP_PASS=""
FROM_EMAIL="noreply@nexora.com"

# =============================================================================
# CLOUD PROVIDER CREDENTIALS
# =============================================================================
# AWS
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
AWS_REGION="us-east-1"

# Azure
AZURE_CLIENT_ID=""
AZURE_CLIENT_SECRET=""
AZURE_TENANT_ID=""

# Google Cloud
GCP_PROJECT_ID=""
GCP_CLIENT_EMAIL=""
GCP_PRIVATE_KEY=""

# =============================================================================
# VAULT CONFIGURATION (PRODUCTION)
# =============================================================================
# HashiCorp Vault
VAULT_ADDR="http://localhost:8200"
VAULT_TOKEN=""
VAULT_NAMESPACE=""

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus metrics
PROMETHEUS_ENABLED=true
METRICS_PATH="/metrics"

# OpenTelemetry tracing
OTEL_ENABLED=false
OTEL_ENDPOINT=""
OTEL_SERVICE_NAME="nexora-api"

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Security features
ENABLE_HELMET=true
ENABLE_CORS=true
ENABLE_COMPRESSION=true

# Request limits
MAX_REQUEST_SIZE="10mb"
MAX_PARAMETER_LIMIT=1000

# Session configuration
SESSION_SECRET="your-session-secret-change-in-production"
SESSION_MAX_AGE=86400000

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Development-only settings
DEV_SEED_DATA=true
DEV_MOCK_EXTERNAL_APIS=true
DEV_SKIP_AUTH=false

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================
# Compliance settings
GDPR_ENABLED=true
CCPA_ENABLED=true
HIPAA_ENABLED=false
SOX_ENABLED=false

# Data retention (days)
AUDIT_LOG_RETENTION=2555  # 7 years
USER_DATA_RETENTION=365   # 1 year
SESSION_DATA_RETENTION=30 # 30 days

# =============================================================================
# SIEM INTEGRATION CONFIGURATION
# =============================================================================
# Syslog Configuration (Generic SIEM - CEF/LEEF/RFC 5424)
SYSLOG_HOST=""
SYSLOG_PORT=514
SYSLOG_PROTOCOL=udp  # udp, tcp, or tls
SYSLOG_FORMAT=cef    # cef, leef, or syslog
SYSLOG_VERIFY_SSL=true

# Splunk HEC (HTTP Event Collector)
SPLUNK_HEC_URL=""
SPLUNK_HEC_TOKEN=""
SPLUNK_INDEX=nexora_security
SPLUNK_SOURCETYPE=nexora:security:events
SPLUNK_VERIFY_SSL=true

# Microsoft Sentinel (Azure Log Analytics)
SENTINEL_WORKSPACE_ID=""
SENTINEL_SHARED_KEY=""
SENTINEL_LOG_TYPE=NexoraSecurityEvents

# Elastic SIEM (Elasticsearch)
ELASTIC_URL=""
ELASTIC_API_KEY=""
ELASTIC_INDEX=nexora-security-events
ELASTIC_VERIFY_SSL=true

# SIEM Batching Configuration
SIEM_BATCH_SIZE=50
SIEM_FLUSH_INTERVAL_MS=10000

# =============================================================================
# DOCKER COMPOSE OVERRIDES
# =============================================================================
# Database passwords for Docker Compose
DB_PASSWORD=secure_password_123
REDIS_PASSWORD=redis_password_123
VAULT_ROOT_TOKEN=dev-root-token
GRAFANA_PASSWORD=admin123e
